{%  extends 'layout.html.twig' %}

{% block title %} Stras'Cook - Reserver une prestation {% endblock %}
{% block stylesheet %}<link href="/assets/css/cart.css" rel="stylesheet" type="text/css"> {% endblock %}

{% block content %}
    <section>
        <div class="container py-5">
            <div class="py-5">
                <h1>Réserver</h1>
                <p>Offrez vous un repas convivial et original. <br/>
                    Partagez un moment unique avec vos proches et profitez du service de qualité du chef Gilles.</p>
            </div>
            <div class="row">
                <div class="form col-12 col-sm-7 offset-sm-1">
                    <!-- Selection des plats -->
                    <!-- Le contenu sera placé dans un panier via Javacript -->

                    <h4>Mon choix de menus</h4>
                    <div class="form-group">
                        {% for menu in menus %}
                            <div id="menu-{{ menu.id }}" class="row">
                                <div class="card mb-2 col-8">
                                    <div class="row no-gutters">
                                        <div class="col-sm-4">
                                            <img src="{{ menu.img_src }}" alt="menu {{ menu.name }}" class="card-img">
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="card-body">
                                                <h5>Menu {{ menu.name }}</h5>
                                                <p class="card-text"><small class="text-muted">{{ menu.starter }}, {{ menu.main_course }}, {{ menu.dessert }}</small></p>
                                                <p class="card-text">{{ menu.description }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <form class="col-3  mb-2  py-4 bg-dark text-white row" action="/reservation/reserver/" method="POST">
                                    <input type="hidden" value="{{ menu.id }}" name="menu_id">
                                    <input type="hidden" value="{{ menu.name }}" name="menu_name">
                                    <div class="form-group">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="1" checked>
                                            <label class="form-check-label" for="gridRadios1">
                                                Normal (20€)
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="2">
                                            <label class="form-check-label" for="gridRadios2">
                                                Local (30€)
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" type="number" min="2" max="15" id="menu_numb" name="menu_q">
                                    </div>
                                    <div class="form-group text-center">
                                        <button type="submit" name="addToCart" value="addToCart" class="btn btn-primary btn-sm btn-add-cart" id="addToCart-{{ menu.id }}">Ajouter au panier</button>
                                    </div>
                                 </form>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="col-6 col-md-3 h-100 container-fluid  py-3">
                    <form action="/reservation/checkCart/" method="POST">
                        <div class="row mb-2 bg-dark text-white py-3">
                            <div class="col-12 mb-2 ">
                                <h4>Ma réservation</h4>
                                <div class="form-group">
                                    <input class="form-control" name="selected_date" type="date">
                                </div>
                                <div class="form-group">
                                    <select class="form-control" name="arrival_time">
                                        <option selected disabled>Heure d'arrivée</option>
                                        <option value="18">18:00</option>
                                        <option value="19">19:00</option>
                                        <option value="20">20:00</option>
                                        <option value="21">21:00</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row bg-dark text-white py-3">
                            <div class="col-12" id="cart">
                                <div class="py-4 px-2" id="cart_details">
                                    <h4 id="cart_header">Votre panier</h4>
                                    {% if panier is defined %}
                                        {% for article in panier %}
                                            <p>{{ article.menuName }}</p>
                                        {% endfor %}
                                    {% else %}
                                    <p>Cliquez sur "ajouter au panier" pour rajouter des menus.</p>
                                    {% endif %}
                                </div>
                                <hr>
                                <div class="col-12">
                                    <p>Total : <span id="total_cart">0</span> €</p>
                                </div>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-warning" name="submit">Valider ma réservation</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block javascript %}
<script src="/assets/script/cart.js" type="text/javascript"></script>

{% endblock %}